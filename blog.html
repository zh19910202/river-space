<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="River Space - 技术博客，分享智能合约开发、区块链技术、DeFi等相关技术文章">
    <meta name="keywords" content="技术博客,智能合约,区块链,DeFi,Solidity,开发经验,周欢">
    <meta name="author" content="周欢">
    <meta property="og:title" content="技术博客 - River Space">
    <meta property="og:description" content="River Space - 技术博客，分享智能合约开发、区块链技术、DeFi等相关技术文章">
    <meta property="og:type" content="website">
    <title>技术博客 - River Space</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="src/styles/main.css">
    <link rel="stylesheet" href="src/styles/components/markdown.css">
    <style>
        /* CSS变量定义 */
        :root {
            --primary-color: #00ffff;
            --secondary-color: #0080ff;
            --accent-color: #ff0080;
            --bg-dark: #0a0a0a;
            --bg-darker: #050505;
            --text-primary: #ffffff;
            --text-secondary: #cccccc;
            --text-muted: #888888;
            --border-color: #333333;
            --glow-color: rgba(0, 255, 255, 0.3);
            --terminal-bg: rgba(0, 0, 0, 0.9);
            --max-content-width: 1240px;
            /* 内容最大宽度 */
        }
        
        /* 确保所有博客相关图片无边框 */
        .blog-item img,
        .blog-cover img,
        img.blog-cover-image,
        .blog-cover-image {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

        /* 全局居中容器 */
        .center-container {
            max-width: var(--max-content-width);
            margin: 0 auto;
            width: 100%;
            padding: 0 20px;
        }

        /* 确保主要内容区域居中 */
        main {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        /* 简洁的博客内容显示 - 完全居中 */
        .blog-section {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            padding: 0 !important;
            margin: 0 auto !important;
            /* 居中显示 */
            background: transparent !important;
            border: none !important;
            width: 100% !important;
            max-width: 1240px !important;
            /* 最大宽度限制 */
        }

        .blog-container {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            background: transparent !important;
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }

        .blog-item {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            transform: translateY(0) !important;
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            padding: 0 !important;
            margin: 0 !important;
            min-height: auto !important;
        }

        .blog-title {
            color: #00ffff !important;
            font-size: 18px !important;
            margin: 10px 0 !important;
        }

        .blog-summary {
            color: white !important;
            font-size: 14px !important;
            line-height: 1.5 !important;
        }

        /* 博客模态框样式 */
        .blog-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .blog-modal.show {
            opacity: 1 !important;
            visibility: visible !important;
        }

        .blog-modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .blog-modal-content {
            position: relative;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.95), rgba(0, 0, 0, 0.9));
            border: none;
            border-radius: 12px;
            max-width: 90vw;
            max-height: 90vh;
            width: 800px;
            overflow: hidden;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s ease;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            z-index: 10001;
            display: block !important;
            visibility: visible !important;
        }

        .blog-modal.show .blog-modal-content {
            transform: scale(1) translateY(0) !important;
            opacity: 1 !important;
            visibility: visible !important;
        }

        .blog-modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 255, 255, 0.05);
        }

        .blog-modal-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .blog-modal-close:hover {
            color: var(--primary-color, #00ffff);
            background: rgba(0, 255, 255, 0.1);
        }

        .blog-modal-meta {
            display: flex;
            gap: 15px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .blog-modal-body {
            padding: 25px;
            max-height: calc(90vh - 120px);
            overflow-y: auto;
        }

        .blog-modal-title {
            color: #00ffff;
            font-size: 28px;
            font-weight: 600;
            margin: 0 0 20px 0;
            line-height: 1.3;
        }

        .blog-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.7;
            font-size: 16px;
        }

        /* Markdown内容样式 */
        .markdown-content {
            color: rgba(255, 255, 255, 0.9) !important;
            line-height: 1.7 !important;
            font-size: 16px !important;
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .markdown-content * {
            color: rgba(255, 255, 255, 0.9) !important;
            display: block !important;
            visibility: visible !important;
        }

        .markdown-content h1,
        .markdown-content h2,
        .markdown-content h3,
        .markdown-content h4,
        .markdown-content h5,
        .markdown-content h6 {
            color: #00ffff !important;
            margin-top: 30px !important;
            margin-bottom: 15px !important;
            font-weight: 600 !important;
        }

        .markdown-content h1 {
            font-size: 28px !important;
            border-bottom: 2px solid #00ffff !important;
            padding-bottom: 10px !important;
        }

        .markdown-content h2 {
            font-size: 24px !important;
        }

        .markdown-content h3 {
            font-size: 20px !important;
        }

        .markdown-content p {
            margin: 15px 0 !important;
            display: block !important;
        }

        .markdown-content strong,
        .markdown-content b {
            color: #00ffff !important;
            font-weight: 600 !important;
        }

        .markdown-content code {
            background: rgba(0, 255, 255, 0.1) !important;
            color: #00ffff !important;
            padding: 2px 6px !important;
            border-radius: 4px !important;
            font-family: 'Courier New', monospace !important;
            display: inline !important;
        }

        .markdown-content pre {
            background: rgba(26, 26, 46, 0.8) !important;
            border: 1px solid rgba(0, 255, 255, 0.2) !important;
            border-radius: 8px !important;
            padding: 20px !important;
            overflow-x: auto !important;
            margin: 20px 0 !important;
            display: block !important;
        }

        .markdown-content pre code {
            background: none !important;
            color: rgba(255, 255, 255, 0.9) !important;
            padding: 0 !important;
        }

        .markdown-content ul,
        .markdown-content ol {
            margin: 15px 0 !important;
            padding-left: 25px !important;
            display: block !important;
        }

        .markdown-content li {
            margin: 8px 0 !important;
            color: rgba(255, 255, 255, 0.8) !important;
            display: list-item !important;
        }

        .markdown-content a {
            color: #0080ff !important;
            text-decoration: underline !important;
            display: inline !important;
        }

        .markdown-content a:hover {
            color: #00ffff !important;
        }

        .markdown-content blockquote {
            border-left: 4px solid #00ffff !important;
            margin: 20px 0 !important;
            padding-left: 20px !important;
            color: rgba(255, 255, 255, 0.7) !important;
            font-style: italic !important;
            display: block !important;
        }

        .markdown-content table {
            border-collapse: collapse !important;
            width: 100% !important;
            margin: 20px 0 !important;
            display: table !important;
        }

        .markdown-content th,
        .markdown-content td {
            border: 1px solid rgba(0, 255, 255, 0.3) !important;
            padding: 12px !important;
            text-align: left !important;
            display: table-cell !important;
        }

        .markdown-content th {
            background: rgba(0, 255, 255, 0.1) !important;
            color: #00ffff !important;
            font-weight: 600 !important;
        }

        .blog-content h1,
        .blog-content h2,
        .blog-content h3 {
            color: #00ffff;
            margin-top: 30px;
            margin-bottom: 15px;
        }

        .blog-content p {
            margin: 15px 0;
        }

        .blog-content code {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .blog-content pre {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 20px;
            overflow-x: auto;
            margin: 20px 0;
        }

        .loading-content {
            text-align: center;
            padding: 40px;
            color: rgba(255, 255, 255, 0.6);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 255, 255, 0.2);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* YouTube风格的博客卡片设计 - 无边框 */
        .blog-item {
            background: transparent;
            border-radius: 8px;
            padding: 0;
            border: none;
            transition: all 0.3s ease;
            opacity: 1;
            transform: translateY(0);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
            cursor: pointer;
        }

        .blog-item:hover {
            transform: translateY(-4px);
        }

        .blog-cover {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            border-radius: 8px;
            background: transparent;
            margin-bottom: 16px;
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

        .blog-cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.2s ease;
            border-radius: 8px;
            display: block;
            margin: 0 auto;
            /* 图片居中 */
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

        .blog-item:hover .blog-cover-image {
            transform: scale(1.05);
        }

        .blog-cover-overlay {
            display: none;
            /* 移除遮罩 */
        }

        /* 博客区域样式优化 - 居中显示 */
        .blog-section {
            padding: 20px 20px 80px 20px;
            /* 增加左右内边距 */
            opacity: 1;
            transform: translateY(0);
            overflow: visible;
            /* 确保内容可见 */
            max-width: 1240px;
            /* 与容器保持一致 */
            margin: 0 auto;
            /* 居中显示 */
            width: 100%;
        }

        /* 封面图错误处理样式 - 居中显示，无边框 */
        .cover-error-placeholder,
        .blog-cover-placeholder {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            height: 160px !important;
            background: rgba(255, 255, 255, 0.03) !important;
            border: none !important;
            border-radius: 8px !important;
            color: rgba(255, 255, 255, 0.6) !important;
            text-align: center !important;
            width: 100% !important;
        }

        .placeholder-icon {
            font-size: 32px !important;
            margin-bottom: 8px !important;
        }

        .placeholder-text {
            font-size: 12px !important;
            color: rgba(255, 255, 255, 0.5) !important;
        }

        /* 模态框封面图错误处理 - 无边框 */
        .blog-modal-cover-placeholder {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            height: 200px !important;
            background: rgba(255, 255, 255, 0.03) !important;
            border: none !important;
            border-radius: 8px !important;
            margin: -25px -25px 20px -25px !important;
        }

        .placeholder-content {
            text-align: center !important;
            color: rgba(255, 255, 255, 0.6) !important;
        }

        .placeholder-icon-large {
            font-size: 48px !important;
            margin-bottom: 10px !important;
        }

        .placeholder-title {
            font-size: 16px !important;
            color: rgba(255, 255, 255, 0.8) !important;
        }

        /* 简洁的搜索和过滤样式 - 居中显示 */
        .blog-search-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 20px 0;
            margin: 0 auto 40px auto;
            max-width: 1200px;
            width: 100%;
        }

        .search-filters {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .search-input-group {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.2);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .search-button, .clear-button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-button {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: #000;
        }

        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }

        .clear-button {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .clear-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .filter-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 6px;
            color: white;
            font-size: 14px;
            min-width: 120px;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .filter-select option {
            background: #1a1a1a;
            color: white;
        }

        .search-results-info {
            margin-top: 15px;
            padding: 10px 0;
            background: transparent;
            border: none;
            border-radius: 0;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        /* 简洁的分页样式 - 完全居中显示 */
        .blog-pagination-container {
            margin: 60px auto 0 auto;
            padding: 20px 0;
            background: transparent;
            border: none;
            border-radius: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            text-align: center;
        }

        .pagination-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            text-align: center;
            width: 100%;
        }

        .pagination-controls {
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
        }

        .pagination-btn {
            padding: 10px 16px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 44px;
        }

        .pagination-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.4);
            color: white;
            transform: translateY(-1px);
        }

        .pagination-btn.active {
            background: rgba(0, 255, 255, 0.2);
            color: var(--primary-color);
            border-color: var(--primary-color);
            font-weight: 600;
        }

        .pagination-ellipsis {
            color: rgba(255, 255, 255, 0.5);
            padding: 0 8px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .search-input-group {
                flex-direction: column;
            }

            .search-input {
                width: 100%;
            }

            .search-button, .clear-button {
                width: 100%;
            }

            .filter-group {
                flex-direction: column;
            }

            .filter-select {
                width: 100%;
            }

            .pagination-controls {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .pagination-btn {
                padding: 6px 10px;
                font-size: 12px;
                min-width: 35px;
            }

            .blog-search-container {
                padding: 15px;
            }
        }

        /* YouTube风格网格布局 - 强制3列，完全居中 */
        .blog-container {
            display: grid !important;
            grid-template-columns: 1fr 1fr 1fr !important;
            /* 强制3列 */
            column-gap: 20px !important;
            row-gap: 30px !important;
            /* 增加行间距 */
            margin: 30px auto 40px auto !important;
            /* 完全居中 */
            width: 100% !important;
            max-width: 1200px !important;
            padding: 0 20px !important;
            overflow: visible !important;
            justify-content: center !important;
            /* 网格内容居中 */
        }

        /* 确保博客项目正确显示 - 居中对齐 */
        .blog-item {
            width: 100% !important;
            max-width: none !important;
            margin-bottom: 0 !important;
            /* 移除可能的底部边距 */
            align-self: start !important;
            /* 顶部对齐 */
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            /* 内容居中 */
            text-align: center !important;
            /* 文字居中 */
        }

        .blog-content-wrapper {
            padding: 0;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            align-items: center;
            /* 内容居中 */
            text-align: center;
            /* 文字居中 */
        }

        .blog-meta {
            display: flex;
            align-items: center;
            justify-content: center;
            /* 元信息居中 */
            gap: 8px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            order: 2;
            width: 100%;
        }

        .blog-category {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 500;
        }

        .blog-date::before,
        .blog-read-time::before {
            display: none;
        }

        .blog-title {
            color: rgba(255, 255, 255, 0.95);
            font-size: 16px;
            font-weight: 600;
            line-height: 1.4;
            margin: 0 0 8px 0;
            order: 1;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-align: center;
            /* 标题居中 */
            width: 100%;
        }

        .blog-title a {
            color: inherit;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .blog-title a:hover {
            color: rgba(255, 255, 255, 1);
        }

        .blog-summary {
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            font-weight: 400;
            order: 3;
            margin-top: 4px;
            text-align: center;
            /* 摘要居中 */
            width: 100%;
        }

        .blog-tags {
            display: none;
            /* YouTube风格不显示标签 */
        }

        .blog-actions {
            display: none;
            /* YouTube风格没有明显的按钮 */
        }

        /* 没有封面图的文章样式 - 完全居中，无边框 */
        .blog-item:not(:has(.blog-cover)) {
            background: rgba(255, 255, 255, 0.03);
            padding: 16px;
            border-radius: 8px;
            text-align: center !important;
            /* 整体居中 */
            align-items: center !important;
            /* 水平居中 */
            justify-content: center !important;
            /* 垂直居中 */
            display: flex !important;
            flex-direction: column !important;
        }

        .blog-item:not(:has(.blog-cover)) .blog-content-wrapper {
            padding: 0;
            align-items: center !important;
            /* 内容居中 */
            text-align: center !important;
            /* 文字居中 */
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        /* 模态框保持原样但调整封面 - 无边框 */
        .blog-modal-cover {
            width: 100%;
            margin: -25px -25px 20px -25px;
            overflow: hidden;
            max-height: 280px;
            border-radius: 8px 8px 0 0;
        }

        .blog-modal-cover-image {
            width: 100%;
            height: auto;
            max-height: 280px;
            object-fit: cover;
            display: block;
            border: none;
        }

        /* 响应式布局 - 简化版本，保持居中 */
        @media (max-width: 768px) {
            .blog-container {
                grid-template-columns: 1fr 1fr;
                /* 平板2列 */
                column-gap: 12px;
                row-gap: 16px;
                padding: 0 15px;
                justify-content: center;
                /* 保持居中 */
            }

            .blog-section {
                padding: 20px 15px 80px 15px;
            }

            .blog-search-container {
                padding: 20px 15px;
            }

            .blog-cover {
                height: 140px;
            }

            .blog-title {
                font-size: 13px;
            }

            .blog-summary {
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .blog-container {
                grid-template-columns: 1fr;
                /* 手机1列 */
                column-gap: 0;
                row-gap: 20px;
                padding: 0 10px;
                justify-content: center;
                /* 保持居中 */
            }

            .blog-section {
                padding: 20px 10px 80px 10px;
            }

            .blog-search-container {
                padding: 20px 10px;
            }

            .blog-cover {
                height: 180px;
            }

            .blog-title {
                font-size: 14px;
            }

            .blog-summary {
                font-size: 12px;
            }
        }

        /* 强制导航栏活动状态样式 */
        .nav-link.active::before {
            left: 0 !important;
            opacity: 0.2 !important;
        }

        .nav-link.active {
            color: var(--primary-color) !important;
            transform: translateY(-2px) !important;
        }

        /* 确保导航栏背景块样式 */
        .nav-link::before {
            content: '' !important;
            position: absolute !important;
            top: 0 !important;
            left: -100% !important;
            width: 100% !important;
            height: 100% !important;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color)) !important;
            opacity: 0 !important;
            transition: all 0.3s ease !important;
            z-index: -1 !important;
            border-radius: 8px !important;
        }

        .nav-link:hover::before {
            left: 0 !important;
            opacity: 0.1 !important;
        }

        /* 隐藏的管理界面样式 */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .admin-panel.show {
            display: flex;
            opacity: 1;
        }

        .admin-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            color: white;
            overflow: hidden;
        }

        .admin-header {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(0, 0, 0, 0.8));
            border-bottom: 1px solid rgba(0, 255, 255, 0.3);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .admin-title {
            font-family: 'Orbitron', monospace;
            font-size: 24px;
            color: var(--primary-color);
            font-weight: 700;
        }

        .admin-close {
            background: rgba(255, 0, 0, 0.2);
            border: 1px solid rgba(255, 0, 0, 0.5);
            color: #ff6b6b;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .admin-close:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: translateY(-2px);
        }

        .admin-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }

        .auth-section {
            text-align: center;
            padding: 60px 20px;
        }

        .auth-title {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 20px;
            font-family: 'Orbitron', monospace;
        }

        .auth-subtitle {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 40px;
            font-size: 16px;
        }

        .auth-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .auth-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .auth-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
        }

        .auth-btn.google {
            background: linear-gradient(135deg, #4285f4, #34a853);
            color: white;
        }

        /* 编辑器区域样式 */
        .editor-section {
            display: none;
        }

        .editor-section.show {
            display: block;
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
        }

        .editor-title {
            color: var(--primary-color);
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            font-family: 'Orbitron', monospace;
        }

        .new-article-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
            text-decoration: none;
        }

        .new-article-btn:hover {
            background: var(--primary-color);
            color: var(--background-color);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }

        .new-article-btn svg {
            width: 16px;
            height: 16px;
            stroke-width: 2;
        }

        .editor-form {
            max-width: 1400px;
            /* 增加最大宽度以适应分屏 */
            margin: 0 auto;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input,
        .form-textarea,
        .form-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.2);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
        }

        /* API Key 配置样式 */
        .api-key-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .api-key-input-group .form-input {
            flex: 1;
            margin: 0;
        }

        .api-key-toggle,
        .api-key-save {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .api-key-toggle:hover,
        .api-key-save:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        .api-key-save {
            background: rgba(0, 255, 0, 0.1);
            border-color: rgba(0, 255, 0, 0.3);
        }

        .api-key-save:hover {
            background: rgba(0, 255, 0, 0.2);
            border-color: #00ff00;
        }

        .editor-container {
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            min-height: 400px;
            background: rgba(255, 255, 255, 0.05);
        }

        .editor-toolbar {
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 10px 15px;
            display: flex;
            gap: 10px;
            border-radius: 8px 8px 0 0;
        }

        .editor-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .editor-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--primary-color);
        }

        .editor-textarea {
            width: 100%;
            height: 350px;
            background: transparent;
            border: none;
            color: white;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
        }

        /* 富文本编辑器容器 */
        .rich-editor-container {
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .rich-editor-container .editor-toolbar {
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 12px 15px;
            display: flex;
            gap: 8px;
            align-items: center;
            flex-wrap: wrap;
            border-radius: 0;
        }

        .rich-editor-container .editor-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .rich-editor-container .editor-btn:hover {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--primary-color);
        }

        .rich-editor-container .editor-btn.toggle-preview {
            background: rgba(0, 255, 255, 0.2);
            border-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }

        .rich-editor-container .editor-btn.ai-btn {
            background: rgba(138, 43, 226, 0.2);
            border-color: rgba(138, 43, 226, 0.5);
            color: #8A2BE2;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .rich-editor-container .editor-btn.ai-btn:hover {
            background: rgba(138, 43, 226, 0.3);
            border-color: #8A2BE2;
            transform: translateY(-1px);
        }

        .rich-editor-container .editor-btn.ai-btn.loading {
            color: rgba(138, 43, 226, 0.7);
            cursor: not-allowed;
        }

        .rich-editor-container .editor-btn.ai-btn .ai-icon {
            display: inline-block;
            margin-right: 4px;
            animation: none;
        }

        .rich-editor-container .editor-btn.ai-btn.loading .ai-icon {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .editor-divider {
            width: 1px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            margin: 0 8px;
        }

        /* 编辑器内容区域 - 左右分屏 */
        .editor-content {
            display: flex;
            min-height: 500px;
        }

        .editor-pane {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .preview-pane {
            flex: 1;
            border-left: 1px solid rgba(0, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            flex-direction: column;
        }

        .rich-editor-container .editor-textarea {
            width: 100%;
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: none;
            outline: none;
            min-height: 500px;
            height: auto;
        }

        .preview-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.7;
            font-size: 14px;
        }

        /* 预览占位符样式 */
        .preview-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
        }

        .preview-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.6;
        }

        .preview-placeholder p {
            margin: 0;
            font-size: 16px;
            line-height: 1.5;
        }

        /* 预览内容样式 */
        .preview-content h1,
        .preview-content h2,
        .preview-content h3,
        .preview-content h4,
        .preview-content h5,
        .preview-content h6 {
            color: #00ffff;
            margin-top: 24px;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .preview-content h1 {
            font-size: 24px;
            border-bottom: 2px solid #00ffff;
            padding-bottom: 8px;
        }

        .preview-content h2 {
            font-size: 20px;
        }

        .preview-content h3 {
            font-size: 18px;
        }

        .preview-content p {
            margin: 12px 0;
        }

        .preview-content strong,
        .preview-content b {
            color: #00ffff;
            font-weight: 600;
        }

        .preview-content em,
        .preview-content i {
            color: rgba(255, 255, 255, 0.8);
            font-style: italic;
        }

        .preview-content code {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        .preview-content pre {
            background: rgba(26, 26, 46, 0.8);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 6px;
            padding: 16px;
            overflow-x: auto;
            margin: 16px 0;
        }

        .preview-content pre code {
            background: none;
            color: rgba(255, 255, 255, 0.9);
            padding: 0;
        }

        .preview-content ul,
        .preview-content ol {
            margin: 12px 0;
            padding-left: 20px;
        }

        .preview-content li {
            margin: 6px 0;
            color: rgba(255, 255, 255, 0.8);
        }

        .preview-content a {
            color: #0080ff;
            text-decoration: underline;
        }

        .preview-content a:hover {
            color: #00ffff;
        }

        .preview-content blockquote {
            border-left: 4px solid #00ffff;
            margin: 16px 0;
            padding-left: 16px;
            color: rgba(255, 255, 255, 0.7);
            font-style: italic;
        }

        .preview-content table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
        }

        .preview-content th,
        .preview-content td {
            border: 1px solid rgba(0, 255, 255, 0.3);
            padding: 8px 12px;
            text-align: left;
        }

        .preview-content th {
            background: rgba(0, 255, 255, 0.1);
            color: #00ffff;
            font-weight: 600;
        }

        /* 媒体容器样式 */
        .preview-content .video-container {
            position: relative;
            width: 100%;
            margin: 20px 0;
            border-radius: 12px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            box-shadow: 0 8px 24px rgba(0, 255, 255, 0.1);
        }

        .preview-content .video-container iframe {
            width: 100%;
            height: 315px;
            border: none;
            display: block;
        }

        .preview-content .video-container video {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 8px;
        }

        .preview-content .image-container {
            margin: 20px 0;
            text-align: center;
        }

        .preview-content .image-container img {
            transition: all 0.3s ease;
            cursor: zoom-in;
        }

        .preview-content .image-container img:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(0, 255, 255, 0.2);
        }

        .preview-content .image-error {
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        /* 音频容器样式 */
        .preview-content .audio-container {
            margin: 20px 0;
            padding: 16px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.1);
        }

        .preview-content .audio-container audio {
            width: 100%;
            height: 40px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            margin-bottom: 12px;
        }

        .preview-content .audio-info {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }

        .preview-content .audio-icon {
            font-size: 16px;
        }

        .preview-content .audio-title {
            flex: 1;
            font-weight: 500;
        }

        /* 响应式视频 */
        @media (max-width: 768px) {
            .preview-content .video-container iframe {
                height: 200px;
            }
        }

        @media (max-width: 480px) {
            .preview-content .video-container iframe {
                height: 180px;
            }
        }

        /* 响应式设计 */
        @media (max-width: 1024px) {
            .editor-content {
                flex-direction: column;
            }

            .preview-pane {
                border-left: none;
                border-top: 1px solid rgba(0, 255, 255, 0.2);
                min-height: 300px;
            }

            .editor-form {
                max-width: 100%;
                padding: 0 10px;
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .rich-editor-container .editor-toolbar {
                padding: 10px;
                gap: 6px;
            }

            .rich-editor-container .editor-btn {
                padding: 5px 8px;
                font-size: 11px;
            }

            .rich-editor-container .editor-textarea,
            .preview-content {
                padding: 15px;
                font-size: 13px;
            }
        }

        .form-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 30px;
        }

        .action-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.4);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .action-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* 封面图上传样式 */
        .cover-upload-container {
            position: relative;
        }

        .form-input[type="file"] {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
            width: 100%;
            cursor: pointer;
        }

        .form-input[type="file"]:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.2);
        }

        .form-input[type="file"]::-webkit-file-upload-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .form-input[type="file"]::-webkit-file-upload-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        /* Firefox文件上传按钮样式 */
        .form-input[type="file"]::file-selector-button {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #000;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-right: 10px;
            transition: all 0.3s ease;
        }

        .form-input[type="file"]::file-selector-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 255, 255, 0.3);
        }

        .cover-preview {
            position: relative;
            margin-top: 10px;
        }

        .remove-cover-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.8);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .remove-cover-btn:hover {
            background: rgba(255, 0, 0, 1);
        }

        .upload-progress {
            margin-top: 10px;
            padding: 10px;
            background: rgba(0, 255, 255, 0.1);
            border-radius: 4px;
            color: var(--primary-color);
            font-size: 14px;
            display: none;
        }

        /* 状态提示 */
        .status-message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 10001;
            transform: translateX(400px);
            transition: all 0.3s ease;
        }

        .status-message.show {
            transform: translateX(0);
        }

        .status-message.success {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border: 1px solid #16a34a;
        }

        .status-message.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border: 1px solid #dc2626;
        }

        .status-message.info {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border: 1px solid var(--primary-color);
            color: #000;
        }
    </style>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@300;400;500&display=swap"
        rel="stylesheet">
    
    <!-- 添加Markdown解析库 - 与admin.html使用相同的marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="logo-text">River Space</span>
            </div>
            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">关于我</a>
                </li>
                <li class="nav-item">
                    <a href="blog.html" class="nav-link active">技术博客</a>
                </li>
            </ul>
            <div class="nav-toggle" id="nav-toggle">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- 背景动画 -->
    <div class="background">
        <div class="stars"></div>
        <div class="grid-overlay"></div>
    </div>

    <!-- 主容器 -->
    <div class="container">
        <!-- 博客页面头部 -->
        <header class="blog-hero-section">
            <div class="blog-hero-content">
                <h1 class="blog-hero-title">技术博客</h1>
                <p class="blog-hero-subtitle">分享智能合约开发、区块链技术与实践经验</p>
            </div>
        </header>

        <!-- 博客区域 -->
        <section class="blog-section" id="blog-section">
            <div class="blog-container" id="blog-container">
                <!-- 博客文章将通过JavaScript动态生成 -->
            </div>
        </section>
    </div>

    <!-- 隐藏的管理界面 -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-container">
            <div class="admin-header">
                <h1 class="admin-title">🚀 River Space Admin</h1>
                <button class="admin-close" onclick="closeAdminPanel()">关闭</button>
            </div>

            <div class="admin-content">
                <!-- 认证区域 -->
                <div class="auth-section" id="authSection">
                    <h2 class="auth-title">管理员认证</h2>
                    <p class="auth-subtitle">使用GitHub Personal Access Token进行认证<br><small>提示：在页面右下角连续点击3次也可打开此面板</small>
                    </p>
                    <div class="auth-buttons">
                        <button class="auth-btn github" onclick="authenticateWith('github')">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                            </svg>
                            GitHub 认证
                        </button>
                    </div>
                </div>

                <!-- 编辑器区域 -->
                <div class="editor-section" id="editorSection">
                    <div class="editor-header">
                        <h3 class="editor-title">创建新文章</h3>
                        <button type="button" class="new-article-btn" onclick="createNewArticle()" title="新建文章">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                <polyline points="14 2 14 8 20 8" />
                                <line x1="16" y1="13" x2="8" y2="13" />
                                <line x1="16" y1="17" x2="8" y2="17" />
                                <polyline points="10 9 9 9 8 9" />
                            </svg>
                            新建文章
                        </button>
                    </div>
                    <form class="editor-form" id="articleForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">文章标题</label>
                                <input type="text" class="form-input" id="articleTitle" placeholder="输入文章标题..."
                                    required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">分类</label>
                                <select class="form-select" id="articleCategory">
                                    <option value="技术">技术</option>
                                    <option value="教程">教程</option>
                                    <option value="思考">思考</option>
                                    <option value="分享">分享</option>
                                </select>
                            </div>
                        </div>

                        <!-- API Key 配置区域 -->
                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label">
                                    OpenRouter API Key
                                    <small style="color: rgba(255,255,255,0.6);">(用于AI摘要生成，可选)</small>
                                </label>
                                <div class="api-key-input-group">
                                    <input type="password" class="form-input" id="openrouterApiKey"
                                        placeholder="输入OpenRouter API Key..." value="">
                                    <button type="button" class="api-key-toggle" onclick="toggleApiKeyVisibility()"
                                        title="显示/隐藏API Key">
                                        <span id="apiKeyToggleIcon">👁️</span>
                                    </button>
                                    <button type="button" class="api-key-save" onclick="saveApiKey()" title="保存API Key">
                                        💾
                                    </button>
                                </div>
                                <small style="color: rgba(255,255,255,0.5); font-size: 12px;">
                                    API Key将保存在本地存储中，用于调用DeepSeek R1模型生成文章摘要
                                </small>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">阅读时间（分钟）</label>
                                <input type="number" class="form-input" id="readTime" placeholder="5" min="1" max="60">
                            </div>
                            <div class="form-group">
                                <label class="form-label">封面图</label>
                                <div class="cover-upload-container">
                                    <input type="file" class="form-input" id="coverImageFile" accept="image/*"
                                        onchange="handleCoverImageUpload(event)">
                                    <input type="url" class="form-input" id="coverImageUrl" placeholder="或输入图片URL"
                                        style="margin-top: 10px;">
                                    <div class="cover-preview" id="coverPreview" style="display: none;">
                                        <img id="coverPreviewImage"
                                            style="max-width: 100%; max-height: 200px; border-radius: 8px; margin-top: 10px;">
                                        <button type="button" class="remove-cover-btn"
                                            onclick="removeCoverImage()">移除</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label">文章摘要</label>
                                <textarea class="form-textarea" id="articleSummary" placeholder="输入文章摘要..."
                                    rows="3"></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label">标签（用逗号分隔）</label>
                                <input type="text" class="form-input" id="articleTags" placeholder="JavaScript, 前端, 开发">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label">文章内容（Markdown）</label>
                                <div class="rich-editor-container">
                                    <div class="editor-toolbar">
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('**粗体**')">加粗</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('*斜体*')">斜体</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('# ')">标题</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('## ')">子标题</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('- ')">列表</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('`代码`')">代码</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('[链接](url)')">链接</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('![图片](url)')">图片</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('> ')">引用</button>
                                        <button type="button" class="editor-btn"
                                            onclick="insertMarkdown('```\n代码块\n```')">代码块</button>
                                        <div class="editor-divider"></div>
                                        <button type="button" class="editor-btn ai-btn" onclick="generateSummary()"
                                            id="summaryBtn" title="根据文章内容生成摘要">
                                            <span class="ai-icon">🤖</span> 生成摘要
                                        </button>
                                        <button type="button" class="editor-btn toggle-preview"
                                            onclick="togglePreview()" id="previewToggleBtn">显示预览</button>
                                    </div>
                                    <div class="editor-content">
                                        <div class="editor-pane">
                                            <textarea class="editor-textarea" id="articleContent"
                                                placeholder="在这里编写你的文章内容...支持Markdown语法"
                                                oninput="updatePreview()"></textarea>
                                        </div>
                                        <div class="preview-pane" id="previewPane">
                                            <div class="preview-content" id="previewContent">
                                                <div class="preview-placeholder">
                                                    <div class="preview-icon">👁️</div>
                                                    <p>在左侧编辑器中输入Markdown内容，这里将显示实时预览</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="action-btn secondary" onclick="previewArticle()">预览</button>
                            <button type="button" class="action-btn secondary" onclick="saveDraft()">保存草稿</button>
                            <button type="submit" class="action-btn" id="publishBtn">发布文章</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- 状态提示 -->
    <div class="status-message" id="statusMessage"></div>

    <!-- 滚动指示器 -->
    <div class="scroll-indicator">
        <div class="scroll-progress"></div>
    </div>

    <script type="module" src="src/blog.js"></script>
    <script type="module" src="src/utils/authGuard.js"></script>
    <script>
        // 图片加载重试机制 - 针对Notion图片
        function retryImageLoad(imgElement, originalSrc, retryCount = 0) {
            const maxRetries = 2; // Notion图片通常不需要太多重试

            if (retryCount >= maxRetries) {
                console.error('图片加载失败，已尝试所有重试:', originalSrc);
                return false;
            }

            console.log(`重试加载图片 ${retryCount + 1}:`, originalSrc);

            imgElement.onload = function () {
                console.log('图片加载成功:', originalSrc);
            };

            imgElement.onerror = function () {
                console.warn(`重试 ${retryCount + 1} 失败:`, originalSrc);
                setTimeout(() => {
                    retryImageLoad(imgElement, originalSrc, retryCount + 1);
                }, 1000 * (retryCount + 1)); // 递增延迟
            };

            imgElement.src = originalSrc;
            return true;
        }

        // 注意：Markdown解析已移至 ContentParser，避免重复解析

        // 更新预览内容 - 使用与admin.html完全相同的方式
        function updatePreview() {
            const textarea = document.getElementById('articleContent');
            const previewContent = document.getElementById('previewContent');

            if (!textarea || !previewContent) return;

            const markdownText = textarea.value.trim();

            if (markdownText === '') {
                previewContent.innerHTML = `
                    <div class="preview-placeholder">
                        <div class="preview-icon">👁️</div>
                        <p>在左侧编辑器中输入Markdown内容，这里将显示实时预览</p>
                    </div>
                `;
            } else {
                try {
                    // 使用与admin.html完全相同的方式
                    if (typeof marked !== 'undefined') {
                        // 直接使用marked.parse，与admin.html一致
                        previewContent.innerHTML = marked.parse(markdownText);
                    } else {
                        // 如果marked库未加载，显示原始内容
                        previewContent.innerHTML = `<pre>${markdownText}</pre>`;
                        console.warn('Marked库未加载，无法解析Markdown');
                    }
                } catch (error) {
                    console.error('预览解析失败:', error);
                    previewContent.innerHTML = `
                        <div class="preview-error">
                            <p>❌ 预览解析失败</p>
                            <pre style="white-space: pre-wrap; font-family: inherit; color: rgba(255,255,255,0.7);">${markdownText}</pre>
                        </div>
                    `;
                }
            }
        }

        // 切换预览显示/隐藏
        function togglePreview() {
            const previewPane = document.getElementById('previewPane');
            const toggleBtn = document.getElementById('previewToggleBtn');
            const editorContent = document.querySelector('.editor-content');

            if (!previewPane || !toggleBtn || !editorContent) return;

            if (previewPane.style.display === 'none') {
                previewPane.style.display = 'flex';
                toggleBtn.textContent = '隐藏预览';
                editorContent.style.display = 'flex';
                updatePreview(); // 显示时更新预览
            } else {
                previewPane.style.display = 'none';
                toggleBtn.textContent = '显示预览';
                editorContent.style.display = 'block';
            }
        }

        // 扩展insertMarkdown函数以支持预览更新
        const originalInsertMarkdown = window.insertMarkdown;
        window.insertMarkdown = function (syntax) {
            if (originalInsertMarkdown) {
                originalInsertMarkdown(syntax);
            } else {
                // 如果原函数不存在，提供基础实现
                const textarea = document.getElementById('articleContent');
                if (!textarea) return;

                const start = textarea.selectionStart;
                const end = textarea.selectionEnd;
                const text = textarea.value;
                const selectedText = text.substring(start, end);

                let newText;
                if (syntax.includes('url') && selectedText) {
                    newText = `[${selectedText}](url)`;
                } else if (syntax.includes('**') && selectedText) {
                    newText = `**${selectedText}**`;
                } else if (syntax.includes('*') && selectedText) {
                    newText = `*${selectedText}*`;
                } else if (syntax.includes('`') && selectedText) {
                    newText = `\`${selectedText}\``;
                } else {
                    newText = syntax;
                }

                textarea.value = text.substring(0, start) + newText + text.substring(end);

                // 设置光标位置
                const newCursorPos = start + newText.length;
                textarea.setSelectionRange(newCursorPos, newCursorPos);
                textarea.focus();
            }

            // 更新预览
            setTimeout(updatePreview, 10);
        };

        // 生成文章摘要功能
        window.generateSummary = async function () {
            const textarea = document.getElementById('articleContent');
            const summaryBtn = document.getElementById('summaryBtn');

            if (!textarea || !textarea.value.trim()) {
                alert('请先输入文章内容');
                return;
            }

            const content = textarea.value.trim();

            // 设置加载状态
            summaryBtn.classList.add('loading');
            summaryBtn.innerHTML = '<span class="ai-icon">🤖</span> 生成中...';
            summaryBtn.disabled = true;

            try {
                const summary = await generateContentSummary(content);

                // 将摘要插入到文档开头
                const summaryText = `\n\n## 📝 文章摘要\n\n${summary}\n\n---\n\n`;

                // 检查是否已有摘要
                if (content.includes('## 📝 文章摘要')) {
                    // 替换现有摘要
                    const regex = /## 📝 文章摘要[\s\S]*?---\s*\n*/;
                    textarea.value = content.replace(regex, summaryText.substring(2));
                } else {
                    // 在开头插入新摘要
                    textarea.value = summaryText.substring(2) + content;
                }

                // 更新预览
                setTimeout(updatePreview, 10);

                alert('摘要已生成并插入到文档开头！');

            } catch (error) {
                console.error('生成摘要失败:', error);
                alert('生成摘要失败，请重试');
            } finally {
                // 恢复按钮状态
                summaryBtn.classList.remove('loading');
                summaryBtn.innerHTML = '<span class="ai-icon">🤖</span> 生成摘要';
                summaryBtn.disabled = false;
            }
        };

        // 生成文章摘要功能 - 使用OpenRouter DeepSeek R1
        window.generateSummary = async function () {
            const textarea = document.getElementById('articleContent');
            const summaryBtn = document.getElementById('summaryBtn');

            if (!textarea || !textarea.value.trim()) {
                alert('请先输入文章内容');
                return;
            }

            const content = textarea.value.trim();
            const apiKey = getApiKey();

            if (!apiKey) {
                alert('请先配置OpenRouter API Key');
                document.getElementById('openrouterApiKey').focus();
                return;
            }

            // 设置加载状态
            summaryBtn.classList.add('loading');
            summaryBtn.innerHTML = '<span class="ai-icon">🤖</span> AI生成中...';
            summaryBtn.disabled = true;

            try {
                const summary = await callOpenRouterAPI(content, apiKey);

                // 将摘要插入到文档开头
                const summaryText = `## 📝 AI文章摘要\n\n${summary}\n\n---\n\n`;

                // 检查是否已有摘要
                if (content.includes('## 📝 AI文章摘要')) {
                    // 替换现有摘要
                    const regex = /## 📝 AI文章摘要[\s\S]*?---\s*\n*/;
                    textarea.value = content.replace(regex, summaryText);
                } else {
                    // 在开头插入新摘要
                    textarea.value = summaryText + content;
                }

                // 更新预览
                setTimeout(updatePreview, 10);

                alert('✅ AI摘要已生成并插入到文档开头！');

            } catch (error) {
                console.error('生成摘要失败:', error);
                alert(`❌ 生成摘要失败: ${error.message}`);
            } finally {
                // 恢复按钮状态
                summaryBtn.classList.remove('loading');
                summaryBtn.innerHTML = '<span class="ai-icon">🤖</span> 生成摘要';
                summaryBtn.disabled = false;
            }
        };

        // 调用OpenRouter API
        async function callOpenRouterAPI(content, apiKey) {
            const prompt = `请为以下文章生成一个简洁明了的摘要，要求：
1. 摘要长度控制在100-200字
2. 突出文章的核心观点和主要内容
3. 语言简洁流畅，适合作为文章预览
4. 不要包含"本文"、"文章"等指代词
5. 直接输出摘要内容，不要其他格式

文章内容：
${content}`;

            const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${apiKey}`,
                    'Content-Type': 'application/json',
                    'HTTP-Referer': window.location.origin,
                    'X-Title': 'Blog Article Summarizer'
                },
                body: JSON.stringify({
                    model: 'deepseek/deepseek-r1-distill-llama-70b',
                    messages: [
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    max_tokens: 500,
                    temperature: 0.7,
                    top_p: 1,
                    frequency_penalty: 0,
                    presence_penalty: 0
                })
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error?.message || `API调用失败 (${response.status})`);
            }

            const data = await response.json();

            if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                throw new Error('API响应格式异常');
            }

            const summary = data.choices[0].message.content.trim();

            if (!summary) {
                throw new Error('生成的摘要为空');
            }

            return summary;
        }

        // API Key 管理功能
        function getApiKey() {
            return localStorage.getItem('openrouter_api_key') || '';
        }

        function saveApiKey() {
            const apiKeyInput = document.getElementById('openrouterApiKey');
            const apiKey = apiKeyInput.value.trim();

            if (!apiKey) {
                alert('请输入有效的API Key');
                return;
            }

            // 简单验证API Key格式
            if (!apiKey.startsWith('sk-or-')) {
                if (!confirm('API Key格式可能不正确（通常以sk-or-开头），确定要保存吗？')) {
                    return;
                }
            }

            localStorage.setItem('openrouter_api_key', apiKey);
            alert('✅ API Key已保存到本地存储');
        }

        function toggleApiKeyVisibility() {
            const apiKeyInput = document.getElementById('openrouterApiKey');
            const toggleIcon = document.getElementById('apiKeyToggleIcon');

            if (apiKeyInput.type === 'password') {
                apiKeyInput.type = 'text';
                toggleIcon.textContent = '🙈';
            } else {
                apiKeyInput.type = 'password';
                toggleIcon.textContent = '👁️';
            }
        }

        // 页面加载时恢复API Key
        document.addEventListener('DOMContentLoaded', function () {
            const savedApiKey = getApiKey();
            if (savedApiKey) {
                document.getElementById('openrouterApiKey').value = savedApiKey;
            }
        });

        // 全局函数，供HTML调用
        window.closeAdminPanel = () => window.adminManager?.closeAdminPanel()
        window.authenticateWith = (provider) => window.adminManager?.authenticateWith(provider)
        window.previewArticle = () => window.adminManager?.previewArticle()
        window.saveDraft = () => window.adminManager?.saveDraft()
        window.handleCoverImageUpload = (event) => window.adminManager?.handleCoverImageUpload(event)
        window.removeCoverImage = () => window.adminManager?.removeCoverImage()
        window.updatePreview = updatePreview
        window.togglePreview = togglePreview

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function () {
            // 确保预览面板在页面加载时是显示的
            const previewPane = document.getElementById('previewPane');
            const toggleBtn = document.getElementById('previewToggleBtn');

            if (previewPane && toggleBtn) {
                previewPane.style.display = 'flex';
                toggleBtn.textContent = '隐藏预览';
                updatePreview();
            }
        });
    </script>
</body>

</html>