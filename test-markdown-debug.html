<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdownæ¸²æŸ“è°ƒè¯•å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        .input-section, .output-section {
            background: #0f3460;
            padding: 20px;
            border-radius: 8px;
        }
        textarea {
            width: 100%;
            height: 400px;
            background: #16213e;
            color: white;
            border: 1px solid #00ffff;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            resize: vertical;
        }
        .output {
            min-height: 400px;
            background: #16213e;
            border: 1px solid #00ffff;
            border-radius: 4px;
            padding: 10px;
            overflow-y: auto;
        }
        button {
            background: #00ffff;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #0080ff;
        }
        .debug-info {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
        h1 { color: #00ffff; }
        h2 { color: #0080ff; }
    </style>
</head>
<body>
    <h1>ğŸ”§ Markdownæ¸²æŸ“è°ƒè¯•å·¥å…·</h1>
    <p>æµ‹è¯•åšå®¢ç³»ç»Ÿçš„markdownè§£æå’Œæ¸²æŸ“åŠŸèƒ½</p>
    
    <div>
        <button onclick="loadSampleMarkdown()">ğŸ“ åŠ è½½ç¤ºä¾‹Markdown</button>
        <button onclick="testContentParser()">ğŸ§ª æµ‹è¯•ContentParser</button>
        <button onclick="testBlogComponent()">ğŸ“± æµ‹è¯•BlogComponent</button>
        <button onclick="clearAll()">ğŸ§¹ æ¸…ç©º</button>
    </div>
    
    <div class="container">
        <div class="input-section">
            <h2>ğŸ“ è¾“å…¥ (Markdown)</h2>
            <textarea id="markdownInput" placeholder="åœ¨è¿™é‡Œè¾“å…¥Markdownå†…å®¹...">
# æµ‹è¯•æ ‡é¢˜

è¿™æ˜¯ä¸€ä¸ª**ç²—ä½“æ–‡æœ¬**å’Œ*æ–œä½“æ–‡æœ¬*çš„ä¾‹å­ã€‚

## äºŒçº§æ ‡é¢˜

è¿™é‡Œæœ‰ä¸€ä¸ªä»£ç å—ï¼š

```javascript
function hello() {
    console.log("Hello, World!");
}
```

### åˆ—è¡¨æµ‹è¯•

- é¡¹ç›®1
- é¡¹ç›®2
- é¡¹ç›®3

1. æœ‰åºåˆ—è¡¨1
2. æœ‰åºåˆ—è¡¨2

> è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—
> åŒ…å«å¤šè¡Œå†…å®¹

[é“¾æ¥æµ‹è¯•](https://example.com)

---

è¿™æ˜¯åˆ†å‰²çº¿ä¸Šæ–¹çš„å†…å®¹ã€‚
            </textarea>
        </div>
        
        <div class="output-section">
            <h2>ğŸ¨ è¾“å‡º (HTML)</h2>
            <div id="htmlOutput" class="output"></div>
        </div>
    </div>
    
    <div class="debug-info" id="debugInfo">
        ğŸ“Š è°ƒè¯•ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
    </div>

    <script type="module">
        import { BlogComponent } from './src/components/BlogComponent.js';
        import { ContentParser } from './src/utils/contentParser.js';
        
        let blogComponent;
        let contentParser;
        
        // åˆå§‹åŒ–
        try {
            contentParser = new ContentParser();
            console.log('âœ… ContentParseråˆå§‹åŒ–æˆåŠŸ');
        } catch (error) {
            console.error('âŒ ContentParseråˆå§‹åŒ–å¤±è´¥:', error);
        }
        
        window.loadSampleMarkdown = function() {
            const sampleMarkdown = `# æµ‹è¯•åšå®¢æ–‡ç« 

è¿™æ˜¯ä¸€ç¯‡**æµ‹è¯•æ–‡ç« **ï¼Œç”¨æ¥éªŒè¯*markdown*æ¸²æŸ“åŠŸèƒ½ã€‚

## åŠŸèƒ½æµ‹è¯•

### ä»£ç å—æµ‹è¯•

\`\`\`javascript
function testFunction() {
    console.log("è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å‡½æ•°");
    return true;
}
\`\`\`

### åˆ—è¡¨æµ‹è¯•

**æ— åºåˆ—è¡¨ï¼š**
- åŠŸèƒ½A
- åŠŸèƒ½B  
- åŠŸèƒ½C

**æœ‰åºåˆ—è¡¨ï¼š**
1. ç¬¬ä¸€æ­¥
2. ç¬¬äºŒæ­¥
3. ç¬¬ä¸‰æ­¥

### é“¾æ¥å’Œå¼•ç”¨

[è®¿é—®GitHub](https://github.com)

> è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„å¼•ç”¨
> åŒ…å«å…³é”®ä¿¡æ¯

### æ ¼å¼åŒ–æ–‡æœ¬

- **ç²—ä½“æ–‡æœ¬**
- *æ–œä½“æ–‡æœ¬*
- \`å†…è”ä»£ç \`
- ~~åˆ é™¤çº¿~~

---

æ–‡ç« ç»“æŸã€‚`;
            
            document.getElementById('markdownInput').value = sampleMarkdown;
            updateDebugInfo('å·²åŠ è½½ç¤ºä¾‹Markdownå†…å®¹');
        };
        
        window.testContentParser = function() {
            if (!contentParser) {
                updateDebugInfo('âŒ ContentParseræœªåˆå§‹åŒ–');
                return;
            }
            
            const markdown = document.getElementById('markdownInput').value;
            const startTime = performance.now();
            
            try {
                const html = contentParser.parseMarkdown(markdown);
                const endTime = performance.now();
                
                document.getElementById('htmlOutput').innerHTML = html;
                updateDebugInfo(`âœ… ContentParserè§£ææˆåŠŸ
ğŸ“Š è€—æ—¶: ${(endTime - startTime).toFixed(2)}ms
ğŸ“ è¾“å…¥é•¿åº¦: ${markdown.length}
ğŸ“ è¾“å‡ºé•¿åº¦: ${html.length}
ğŸ¨ HTMLé¢„è§ˆ: ${html.substring(0, 200)}...`);
                
            } catch (error) {
                updateDebugInfo(`âŒ ContentParserè§£æå¤±è´¥: ${error.message}`);
                console.error('ContentParser error:', error);
            }
        };
        
        window.testBlogComponent = function() {
            const markdown = document.getElementById('markdownInput').value;
            
            // æ¨¡æ‹Ÿåšå®¢ç»„ä»¶çš„å†…å®¹æ£€æµ‹é€»è¾‘
            const hasHtmlTags = markdown.includes('<') && markdown.includes('>');
            const hasMarkdownSyntax = /^#{1,6}\s+|^\*\*.*\*\*|\*\*.*\*\*|\`\`\`|\[.*\]\(.*\)|^\*\s+|^\d+\.\s+|^\>\s+|^\-\s+|^\+\s+|^---+$|^\*\*\*+$/m.test(markdown);
            
            let debugText = `ğŸ” BlogComponentå†…å®¹åˆ†æ:
ğŸ“ å†…å®¹é•¿åº¦: ${markdown.length}
ğŸ¨ åŒ…å«HTMLæ ‡ç­¾: ${hasHtmlTags}
ğŸ“ åŒ…å«Markdownè¯­æ³•: ${hasMarkdownSyntax}`;
            
            if (!hasHtmlTags && markdown.trim()) {
                if (hasMarkdownSyntax) {
                    debugText += '\nâš ï¸ æ£€æµ‹ä¸ºMarkdownå†…å®¹ï¼Œä½¿ç”¨ContentParserè§£æ...';
                    if (contentParser) {
                        try {
                            const html = contentParser.parseMarkdown(markdown);
                            document.getElementById('htmlOutput').innerHTML = html;
                            debugText += `\nâœ… è§£ææˆåŠŸï¼Œè¾“å‡ºé•¿åº¦: ${html.length}`;
                        } catch (error) {
                            debugText += `\nâŒ è§£æå¤±è´¥: ${error.message}`;
                        }
                    } else {
                        debugText += '\nâŒ ContentParseræœªåˆå§‹åŒ–';
                    }
                } else {
                    debugText += '\nâš ï¸ æ£€æµ‹ä¸ºçº¯æ–‡æœ¬ï¼Œè¿›è¡Œæ®µè½åŒ…è£…...';
                    const paragraphs = markdown.split('\n').filter(line => line.trim()).map(line => `<p>${line.trim()}</p>`).join('');
                    document.getElementById('htmlOutput').innerHTML = paragraphs;
                }
            } else {
                debugText += '\nâœ… å†…å®¹å·²ç»æ˜¯HTMLæ ¼å¼';
                document.getElementById('htmlOutput').innerHTML = markdown;
            }
            
            updateDebugInfo(debugText);
        };
        
        window.clearAll = function() {
            document.getElementById('markdownInput').value = '';
            document.getElementById('htmlOutput').innerHTML = '';
            updateDebugInfo('ğŸ§¹ å·²æ¸…ç©ºæ‰€æœ‰å†…å®¹');
        };
        
        function updateDebugInfo(text) {
            const debugDiv = document.getElementById('debugInfo');
            debugDiv.textContent = text;
            console.log(text);
        }
        
        // è‡ªåŠ¨å¤„ç†
        document.getElementById('markdownInput').addEventListener('input', function() {
            const markdown = this.value;
            if (markdown.trim() && contentParser) {
                try {
                    const html = contentParser.parseMarkdown(markdown);
                    document.getElementById('htmlOutput').innerHTML = html;
                } catch (error) {
                    updateDebugInfo(`è§£æé”™è¯¯: ${error.message}`);
                }
            }
        });
        
        // åˆå§‹åŒ–æ—¶åŠ è½½ç¤ºä¾‹
        loadSampleMarkdown();
        testContentParser();
    </script>
</body>
</html>