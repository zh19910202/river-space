<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšå®¢å†…å®¹æ¸²æŸ“è°ƒè¯•æµ‹è¯•</title>
    <link rel="stylesheet" href="./src/styles/components/blog-detail.css">
    <link rel="stylesheet" href="./src/styles/components/markdown.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary-color: #00ffff;
            --secondary-color: #0080ff;
            --bg-dark: #0a0a0a;
            --text-primary: #ffffff;
            --border-color: rgba(0, 255, 255, 0.2);
        }
        
        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .test-title {
            color: var(--primary-color);
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .input-area {
            width: 100%;
            min-height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: linear-gradient(45deg, var(--primary-color), #0080ff);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 10px 10px 0;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }
        
        .output-area {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 20px;
            min-height: 100px;
            margin-top: 15px;
        }
        
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .status.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }
        
        .status.error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }
        
        .status.info {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: var(--primary-color);
        }
        
        .debug-info {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #ffff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .test-data {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ åšå®¢å†…å®¹æ¸²æŸ“è°ƒè¯•æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•è¯´æ˜</h2>
            <p>æ­¤é¡µé¢ç”¨äºæµ‹è¯•åšå®¢å†…å®¹æ¸²æŸ“ï¼Œç‰¹åˆ«æ˜¯æ ‡é¢˜æ¸²æŸ“é—®é¢˜ã€‚åœ¨æ§åˆ¶å°ä¸­å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯ã€‚</p>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•1: æ ‡é¢˜æ¸²æŸ“æµ‹è¯•</h2>
            <textarea id="titleInput" class="input-area">#### 1. **å¤šç«¯è¦†ç›–ï¼Œçµæ´»æ¥å…¥**

æ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ç­‰ä¸»æµå¹³å°ï¼Œè®©AIåŠ©æ‰‹è§¦è¾¾ä¼ä¸šå„ä¸ªæ²Ÿé€šåœºæ™¯ã€‚

#### 2. **æ™ºèƒ½å¯¹è¯ï¼Œé«˜æ•ˆåŠå…¬**

åŸºäºå¤§æ¨¡å‹çš„è‡ªç„¶è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œæä¾›æ™ºèƒ½é—®ç­”ã€æ–‡æ¡£å¤„ç†ã€æ•°æ®åˆ†æç­‰åŠå…¬åŠ©æ‰‹åŠŸèƒ½ã€‚

#### 3. **å®‰å…¨å¯é ï¼Œä¼ä¸šçº§ä¿éšœ**

æä¾›å®Œå–„çš„å®‰å…¨æœºåˆ¶å’Œæƒé™æ§åˆ¶ï¼Œç¡®ä¿ä¼ä¸šæ•°æ®å®‰å…¨ã€‚</textarea>
            <button class="test-button" onclick="testTitleRendering()">æµ‹è¯•æ ‡é¢˜æ¸²æŸ“</button>
            <div class="status info">ç‚¹å‡»æŒ‰é’®æµ‹è¯•æ ‡é¢˜æ¸²æŸ“æ•ˆæœ</div>
            <div id="titleOutput" class="output-area blog-article-content markdown-content">
                æ¸²æŸ“ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•2: å¤æ‚å†…å®¹æµ‹è¯•</h2>
            <textarea id="complexInput" class="input-area"># æ ‡é¢˜æµ‹è¯•

è¿™æ˜¯ä¸€ä¸ªæ®µè½å†…å®¹ã€‚

## å­æ ‡é¢˜

- åˆ—è¡¨é¡¹1
- åˆ—è¡¨é¡¹2
- **ç²—ä½“æ–‡æœ¬**
- *æ–œä½“æ–‡æœ¬*

### ä¸‰çº§æ ‡é¢˜

1. ç¼–å·åˆ—è¡¨1
2. ç¼–å·åˆ—è¡¨2

ä»£ç ç¤ºä¾‹ï¼š
```javascript
function hello() {
    console.log("Hello World");
}
```

[é“¾æ¥æµ‹è¯•](https://example.com)</textarea>
            <button class="test-button" onclick="testComplexRendering()">æµ‹è¯•å¤æ‚å†…å®¹æ¸²æŸ“</button>
            <div class="status info">ç‚¹å‡»æŒ‰é’®æµ‹è¯•å¤æ‚å†…å®¹æ¸²æŸ“æ•ˆæœ</div>
            <div id="complexOutput" class="output-area blog-article-content markdown-content">
                æ¸²æŸ“ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">è°ƒè¯•ä¿¡æ¯</h2>
            <button class="test-button" onclick="showDebugInfo()">æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯</button>
            <div class="status info">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯</div>
            <div id="debugInfo" class="debug-info" style="display: none;">
                è°ƒè¯•ä¿¡æ¯å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
    </div>

    <script>
        // é…ç½®marked
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: false,          // ä¸å…è®¸å¼ºåˆ¶æ¢è¡Œï¼Œé¿å…æ ‡é¢˜è¢«åˆ†å‰²
                gfm: true,              // å¯ç”¨GitHubé£æ ¼Markdown
                headerIds: true,        // ä¸ºæ ‡é¢˜ç”ŸæˆID
                mangle: false,          // ä¸è½¬ä¹‰æ ‡é¢˜ä¸­çš„HTML
                sanitize: false,        // ä¸è¿‡æ»¤HTMLæ ‡ç­¾
                smartLists: true,       // æ™ºèƒ½åˆ—è¡¨å¤„ç†
                smartypants: false,     // ä¸è½¬æ¢å¼•å·
                silent: false,          // ä¸å¿½ç•¥è§£æé”™è¯¯
                pedantic: false,        // ä¸ä¸¥æ ¼éµå¾ªmarkdownè§„èŒƒ
                xhtml: false            // ä¸ä½¿ç”¨XHTML
            });
        }

        function testTitleRendering() {
            const input = document.getElementById('titleInput').value;
            const output = document.getElementById('titleOutput');
            
            try {
                console.log('ğŸ“ åŸå§‹è¾“å…¥å†…å®¹:', input);
                
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(input.trim());
                    console.log('âœ… Markedè§£æç»“æœ:', html);
                    
                    output.innerHTML = html;
                    output.className = 'output-area blog-article-content markdown-content';
                    showStatus('titleOutput', 'âœ… æ ‡é¢˜æ¸²æŸ“æˆåŠŸ', 'success');
                    
                    // éªŒè¯ä¿®å¤æ•ˆæœ
                    setTimeout(() => {
                        const h4Elements = output.querySelectorAll('h4');
                        let isFixed = true;
                        h4Elements.forEach((h4, index) => {
                            const firstChild = h4.firstChild;
                            const secondChild = h4.childNodes[1];
                            console.log(`ğŸ” æ ‡é¢˜ ${index + 1} çš„å­å…ƒç´ :`, firstChild, secondChild);
                            
                            if (firstChild && secondChild && 
                                firstChild.nodeType === Node.TEXT_NODE && 
                                firstChild.textContent.trim() === '1.' &&
                                secondChild.nodeType === Node.ELEMENT_NODE) {
                                console.log(`âœ… æ ‡é¢˜ ${index + 1} ä¿®å¤æ­£ç¡®: "${firstChild.textContent.trim()}" å’Œ "${secondChild.textContent.trim()}" åœ¨åŒä¸€è¡Œ`);
                            } else {
                                isFixed = false;
                            }
                        });
                        
                        if (isFixed) {
                            showStatus('titleOutput', 'âœ… æ ‡é¢˜æ¸²æŸ“ä¿®å¤æˆåŠŸï¼æ•°å­—å’Œæ–‡æœ¬åœ¨åŒä¸€è¡Œæ˜¾ç¤º', 'success');
                        } else {
                            showStatus('titleOutput', 'âš ï¸ æ ‡é¢˜æ¸²æŸ“å¯èƒ½ä»æœ‰é—®é¢˜', 'error');
                        }
                    }, 100);
                } else {
                    output.innerHTML = '<p style="color: #ff6b6b;">é”™è¯¯: markedåº“æœªåŠ è½½</p>';
                    showStatus('titleOutput', 'âŒ markedåº“æœªåŠ è½½', 'error');
                }
            } catch (error) {
                console.error('âŒ æ¸²æŸ“é”™è¯¯:', error);
                output.innerHTML = `<p style="color: #ff6b6b;">æ¸²æŸ“é”™è¯¯: ${error.message}</p>`;
                showStatus('titleOutput', `âŒ æ¸²æŸ“é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testComplexRendering() {
            const input = document.getElementById('complexInput').value;
            const output = document.getElementById('complexOutput');
            
            try {
                console.log('ğŸ“ åŸå§‹è¾“å…¥å†…å®¹:', input);
                
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(input.trim());
                    console.log('âœ… Markedè§£æç»“æœ:', html);
                    
                    output.innerHTML = html;
                    output.className = 'output-area blog-article-content markdown-content';
                    showStatus('complexOutput', 'âœ… å¤æ‚å†…å®¹æ¸²æŸ“æˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ff6b6b;">é”™è¯¯: markedåº“æœªåŠ è½½</p>';
                    showStatus('complexOutput', 'âŒ markedåº“æœªåŠ è½½', 'error');
                }
            } catch (error) {
                console.error('âŒ æ¸²æŸ“é”™è¯¯:', error);
                output.innerHTML = `<p style="color: #ff6b6b;">æ¸²æŸ“é”™è¯¯: ${error.message}</p>`;
                showStatus('complexOutput', `âŒ æ¸²æŸ“é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function showDebugInfo() {
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.style.display = 'block';
            
            // æ¨¡æ‹Ÿä¸€äº›è°ƒè¯•æ•°æ®
            const debugData = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                markedVersion: typeof marked !== 'undefined' ? marked.version || 'unknown' : 'not loaded',
                timestamp: new Date().toISOString(),
                testResults: {
                    titleRendering: 'passed',
                    complexRendering: 'passed'
                }
            };
            
            debugInfo.textContent = JSON.stringify(debugData, null, 2);
            showStatus('debugInfo', 'âœ… è°ƒè¯•ä¿¡æ¯å·²æ˜¾ç¤º', 'success');
        }

        function showStatus(elementId, message, type) {
            // ç§»é™¤ç°æœ‰çš„çŠ¶æ€æ¶ˆæ¯
            const existingStatus = document.querySelector(`#${elementId}`).previousElementSibling;
            if (existingStatus && existingStatus.className.includes('status')) {
                existingStatus.remove();
            }
            
            // åˆ›å»ºæ–°çš„çŠ¶æ€æ¶ˆæ¯
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.textContent = message;
            
            // æ’å…¥åˆ°è¾“å‡ºåŒºåŸŸå‰
            const outputElement = document.getElementById(elementId);
            outputElement.parentNode.insertBefore(status, outputElement);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª åšå®¢å†…å®¹æ¸²æŸ“è°ƒè¯•æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“‹ æµ‹è¯•å†…å®¹ï¼š');
            console.log('1. æ ‡é¢˜æ¸²æŸ“æµ‹è¯•');
            console.log('2. å¤æ‚å†…å®¹æµ‹è¯•');
            console.log('3. è°ƒè¯•ä¿¡æ¯æ˜¾ç¤º');
        });
    </script>
</body>
</html>