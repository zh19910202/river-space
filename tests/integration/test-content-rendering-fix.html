<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†…å®¹æ¸²æŸ“ä¿®å¤æµ‹è¯•</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary-color: #00ffff;
            --bg-dark: #0a0a0a;
            --text-primary: #ffffff;
            --border-color: #333333;
        }
        
        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .test-title {
            color: var(--primary-color);
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .input-area {
            width: 100%;
            min-height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: linear-gradient(45deg, var(--primary-color), #0080ff);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 10px 10px 0;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }
        
        .output-area {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 20px;
            min-height: 100px;
            margin-top: 15px;
        }
        
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .status.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }
        
        .status.error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }
        
        .status.info {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: var(--primary-color);
        }
        
        .fix-list {
            list-style: none;
            padding: 0;
        }
        
        .fix-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }
        
        .fix-list li::before {
            content: 'âœ…';
            margin-right: 10px;
            font-weight: bold;
        }
        
        .code-block {
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }
        
        pre {
            margin: 0;
            color: #ccc;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ å†…å®¹æ¸²æŸ“ä¿®å¤éªŒè¯</h1>
        
        <div class="test-section">
            <h2 class="test-title">ä¿®å¤å†…å®¹æ¦‚è§ˆ</h2>
            <ul class="fix-list">
                <li>ä¿®å¤ContentParserä¸­çš„Markdownè§£æé€»è¾‘</li>
                <li>ä¼˜åŒ–BlogComponentä¸­çš„å†…å®¹æ˜¾ç¤ºé€»è¾‘</li>
                <li>æ”¹è¿›HTMLå†…å®¹å¤„ç†å’Œçº¯æ–‡æœ¬åŒ…è£…é€»è¾‘</li>
                <li>å¢å¼ºé”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µå¤„ç†</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•1: Markdownå†…å®¹è§£æ</h2>
            <textarea id="markdownInput" class="input-area"># æ ‡é¢˜æµ‹è¯•
è¿™æ˜¯ä¸€ä¸ªæ®µè½å†…å®¹ã€‚

## å­æ ‡é¢˜
- åˆ—è¡¨é¡¹1
- åˆ—è¡¨é¡¹2
- **ç²—ä½“æ–‡æœ¬**
- *æ–œä½“æ–‡æœ¬*

ä»£ç ç¤ºä¾‹ï¼š
```javascript
function hello() {
    console.log("Hello World");
}
```

[é“¾æ¥æµ‹è¯•](https://example.com)</textarea>
            <button class="test-button" onclick="testMarkdownParsing()">æµ‹è¯•Markdownè§£æ</button>
            <div class="status info">è¾“å…¥Markdownå†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®æµ‹è¯•è§£ææ•ˆæœ</div>
            <div id="markdownOutput" class="output-area">
                è§£æç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•2: HTMLå†…å®¹å¤„ç†</h2>
            <textarea id="htmlInput" class="input-area"><h1>HTMLæ ‡é¢˜</h1>
<p>è¿™æ˜¯ä¸€ä¸ªHTMLæ®µè½å†…å®¹ã€‚</p>
<ul>
    <li>HTMLåˆ—è¡¨é¡¹1</li>
    <li>HTMLåˆ—è¡¨é¡¹2</li>
</ul>
<pre><code class="language-javascript">console.log('HTMLä»£ç æµ‹è¯•');</code></pre>
<blockquote>è¿™æ˜¯ä¸€ä¸ªå¼•ç”¨å—</blockquote></textarea>
            <button class="test-button" onclick="testHtmlProcessing()">æµ‹è¯•HTMLå¤„ç†</button>
            <div class="status info">è¾“å…¥HTMLå†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®æµ‹è¯•å¤„ç†æ•ˆæœ</div>
            <div id="htmlOutput" class="output-area">
                å¤„ç†ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•3: çº¯æ–‡æœ¬å†…å®¹å¤„ç†</h2>
            <textarea id="textInput" class="input-area">è¿™æ˜¯çº¯æ–‡æœ¬å†…å®¹ã€‚

å®ƒåº”è¯¥è¢«æ­£ç¡®åœ°åŒ…è£…æˆæ®µè½ã€‚

æ¯ä¸ªæ®µè½ä¹‹é—´æœ‰ä¸¤ä¸ªæ¢è¡Œç¬¦ã€‚

è¿™æ˜¯æœ€åä¸€ä¸ªæ®µè½ã€‚</textarea>
            <button class="test-button" onclick="testTextProcessing()">æµ‹è¯•çº¯æ–‡æœ¬å¤„ç†</button>
            <div class="status info">è¾“å…¥çº¯æ–‡æœ¬å†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®æµ‹è¯•åŒ…è£…æ•ˆæœ</div>
            <div id="textOutput" class="output-area">
                åŒ…è£…ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•4: è¾¹ç•Œæƒ…å†µå¤„ç†</h2>
            <div class="code-block">
                <pre>// æµ‹è¯•ç©ºå†…å®¹
const emptyContent = '';

// æµ‹è¯•åªæœ‰ç©ºæ ¼çš„å†…å®¹
const whitespaceContent = '   ';

// æµ‹è¯•ç‰¹æ®Šå­—ç¬¦å†…å®¹
const specialContent = '&lt;script&gt;alert("xss")&lt;/script&gt;';

// æµ‹è¯•æ··åˆå†…å®¹
const mixedContent = '# æ ‡é¢˜\n\næ®µè½å†…å®¹\n\n&lt;p&gt;HTMLæ®µè½&lt;/p&gt;';</pre>
            </div>
            <button class="test-button" onclick="testEdgeCases()">æµ‹è¯•è¾¹ç•Œæƒ…å†µ</button>
            <div class="status info">æµ‹è¯•å„ç§è¾¹ç•Œæƒ…å†µçš„å¤„ç†æ•ˆæœ</div>
            <div id="edgeOutput" class="output-area">
                è¾¹ç•Œæƒ…å†µæµ‹è¯•ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
    </div>

    <script>
        // é…ç½®marked
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: true,
                gfm: true,
                headerIds: true,
                mangle: false,
                sanitize: false,
                smartLists: true,
                smartypants: false,
                silent: false,
                pedantic: false,
                xhtml: false
            });
        }

        function testMarkdownParsing() {
            const input = document.getElementById('markdownInput').value;
            const output = document.getElementById('markdownOutput');
            
            try {
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(input.trim());
                    output.innerHTML = html;
                    output.className = 'output-area';
                    showStatus('markdownOutput', 'âœ… Markdownè§£ææˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ff6b6b;">é”™è¯¯: markedåº“æœªåŠ è½½</p>';
                    showStatus('markdownOutput', 'âŒ markedåº“æœªåŠ è½½', 'error');
                }
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">è§£æé”™è¯¯: ${error.message}</p>`;
                showStatus('markdownOutput', `âŒ è§£æé”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testHtmlProcessing() {
            const input = document.getElementById('htmlInput').value;
            const output = document.getElementById('htmlOutput');
            
            try {
                // æ£€æŸ¥æ˜¯å¦æ˜¯HTMLæ ¼å¼ï¼ˆæ›´å‡†ç¡®çš„åˆ¤æ–­ï¼‰
                const hasHtmlTags = input && (input.includes('<p>') || input.includes('<h') || 
                                     input.includes('<div') || input.includes('<span') ||
                                     input.includes('<ul') || input.includes('<ol') ||
                                     input.includes('<pre') || input.includes('<blockquote'));
                
                if (hasHtmlTags) {
                    output.innerHTML = input;
                    output.className = 'output-area';
                    showStatus('htmlOutput', 'âœ… HTMLå†…å®¹å¤„ç†æˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ffaa00;">âš ï¸ å†…å®¹ä¸æ˜¯HTMLæ ¼å¼ï¼ŒæŒ‰åŸæ ·æ˜¾ç¤º</p>' + input;
                    showStatus('htmlOutput', 'âš ï¸ å†…å®¹ä¸æ˜¯HTMLæ ¼å¼', 'warning');
                }
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">å¤„ç†é”™è¯¯: ${error.message}</p>`;
                showStatus('htmlOutput', `âŒ å¤„ç†é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testTextProcessing() {
            const input = document.getElementById('textInput').value;
            const output = document.getElementById('textOutput');
            
            try {
                // æ£€æŸ¥æ˜¯å¦æ˜¯çº¯æ–‡æœ¬
                if (!input || !input.trim()) {
                    output.innerHTML = '<p style="color: #ffaa00; text-align: center;">ğŸ“ å†…å®¹ä¸ºç©º</p>';
                    showStatus('textOutput', 'âš ï¸ å†…å®¹ä¸ºç©º', 'warning');
                    return;
                }
                
                const hasHtmlTags = input.includes('<') && input.includes('>');
                
                if (!hasHtmlTags && input.trim()) {
                    // æ®µè½åŒ…è£…å¤„ç†
                    const htmlContent = input.split('\n\n')
                        .filter(line => line.trim())
                        .map(para => `<p>${para.trim().replace(/\n/g, '<br>')}</p>`)
                        .join('');
                    
                    output.innerHTML = htmlContent;
                    output.className = 'output-area';
                    showStatus('textOutput', 'âœ… çº¯æ–‡æœ¬å¤„ç†æˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ffaa00;">âš ï¸ å†…å®¹åŒ…å«HTMLæ ‡ç­¾ï¼ŒæŒ‰åŸæ ·æ˜¾ç¤º</p>' + input;
                    showStatus('textOutput', 'âš ï¸ å†…å®¹åŒ…å«HTMLæ ‡ç­¾', 'warning');
                }
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">å¤„ç†é”™è¯¯: ${error.message}</p>`;
                showStatus('textOutput', `âŒ å¤„ç†é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testEdgeCases() {
            const output = document.getElementById('edgeOutput');
            
            try {
                let results = [];
                
                // æµ‹è¯•ç©ºå†…å®¹
                const emptyResult = marked.parse('');
                results.push(`ç©ºå†…å®¹æµ‹è¯•: ${emptyResult === '' ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`);
                
                // æµ‹è¯•åªæœ‰ç©ºæ ¼çš„å†…å®¹
                const whitespaceResult = marked.parse('   ');
                results.push(`ç©ºæ ¼å†…å®¹æµ‹è¯•: ${whitespaceResult.includes('p') ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`);
                
                // æµ‹è¯•æ™®é€šå†…å®¹
                const normalResult = marked.parse('# æµ‹è¯•');
                results.push(`æ™®é€šå†…å®¹æµ‹è¯•: ${normalResult.includes('<h1>') ? 'âœ… é€šè¿‡' : 'âŒ å¤±è´¥'}`);
                
                output.innerHTML = results.map(r => `<p>${r}</p>`).join('');
                output.className = 'output-area';
                showStatus('edgeOutput', 'âœ… è¾¹ç•Œæƒ…å†µæµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">æµ‹è¯•é”™è¯¯: ${error.message}</p>`;
                showStatus('edgeOutput', `âŒ æµ‹è¯•é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function showStatus(elementId, message, type) {
            // ç§»é™¤ç°æœ‰çš„çŠ¶æ€æ¶ˆæ¯
            const existingStatus = document.querySelector(`#${elementId}`).previousElementSibling;
            if (existingStatus && existingStatus.className.includes('status')) {
                existingStatus.remove();
            }
            
            // åˆ›å»ºæ–°çš„çŠ¶æ€æ¶ˆæ¯
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.textContent = message;
            
            // æ’å…¥åˆ°è¾“å‡ºåŒºåŸŸå‰
            const outputElement = document.getElementById(elementId);
            outputElement.parentNode.insertBefore(status, outputElement);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª å†…å®¹æ¸²æŸ“ä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“‹ æµ‹è¯•å†…å®¹ï¼š');
            console.log('1. Markdownè§£æé€»è¾‘ä¿®å¤');
            console.log('2. HTMLå†…å®¹å¤„ç†ä¼˜åŒ–');
            console.log('3. çº¯æ–‡æœ¬åŒ…è£…é€»è¾‘æ”¹è¿›');
            console.log('4. è¾¹ç•Œæƒ…å†µå¤„ç†å¢å¼º');
        });
    </script>
</body>
</html>