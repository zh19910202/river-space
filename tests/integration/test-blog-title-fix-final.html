<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åšå®¢è¯¦æƒ…é¡µæ ‡é¢˜ä¿®å¤éªŒè¯</title>
    <link rel="stylesheet" href="./src/styles/components/blog-detail.css">
    <link rel="stylesheet" href="./src/styles/components/markdown.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root {
            --primary-color: #00ffff;
            --secondary-color: #0080ff;
            --bg-dark: #0a0a0a;
            --text-primary: #ffffff;
            --border-color: rgba(0, 255, 255, 0.2);
        }
        
        body {
            background: var(--bg-dark);
            color: var(--text-primary);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            padding: 20px;
            margin: 0;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }
        
        .test-title {
            color: var(--primary-color);
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 20px;
        }
        
        .input-area {
            width: 100%;
            min-height: 150px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            color: var(--text-primary);
            font-family: 'Courier New', monospace;
            resize: vertical;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: linear-gradient(45deg, var(--primary-color), #0080ff);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 10px 10px 0;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 255, 0.3);
        }
        
        .output-area {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 8px;
            padding: 20px;
            min-height: 100px;
            margin-top: 15px;
        }
        
        .status {
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .status.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }
        
        .status.error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }
        
        .status.info {
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: var(--primary-color);
        }
        
        .fix-list {
            list-style: none;
            padding: 0;
        }
        
        .fix-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }
        
        .fix-list li::before {
            content: 'âœ…';
            margin-right: 10px;
            font-weight: bold;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .result-table th,
        .result-table td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: left;
        }
        
        .result-table th {
            background: rgba(0, 255, 255, 0.1);
            color: var(--primary-color);
        }
        
        .result-table tr:nth-child(even) {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .pass {
            color: #00ff00;
        }
        
        .fail {
            color: #ff6b6b;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ åšå®¢è¯¦æƒ…é¡µæ ‡é¢˜ä¿®å¤éªŒè¯</h1>
        
        <div class="test-section">
            <h2 class="test-title">ä¿®å¤å†…å®¹æ¦‚è§ˆ</h2>
            <ul class="fix-list">
                <li>ä¿®å¤åšå®¢è¯¦æƒ…é¡µCSSæ ·å¼å†²çªé—®é¢˜</li>
                <li>ä¼˜åŒ–æ ‡é¢˜å†…è”å…ƒç´ æ˜¾ç¤ºï¼ˆæ•°å­—å’Œæ–‡æœ¬åœ¨åŒä¸€è¡Œï¼‰</li>
                <li>ä¿æŒä¸ç®¡ç†é¢„è§ˆæ¨¡å¼ä¸€è‡´çš„æ ·å¼</li>
                <li>å¢å¼ºå“åº”å¼è®¾è®¡æ”¯æŒ</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•1: æ ‡é¢˜æ¸²æŸ“æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿåšå®¢è¯¦æƒ…é¡µç¯å¢ƒï¼‰</h2>
            <textarea id="titleInput" class="input-area">#### 1. **å¤šç«¯è¦†ç›–ï¼Œçµæ´»æ¥å…¥**

æ”¯æŒå¾®ä¿¡å…¬ä¼—å·ã€ä¼ä¸šå¾®ä¿¡ã€é£ä¹¦ã€é’‰é’‰ç­‰ä¸»æµå¹³å°ï¼Œè®©AIåŠ©æ‰‹è§¦è¾¾ä¼ä¸šå„ä¸ªæ²Ÿé€šåœºæ™¯ã€‚

#### 2. **æ™ºèƒ½å¯¹è¯ï¼Œé«˜æ•ˆåŠå…¬**

åŸºäºå¤§æ¨¡å‹çš„è‡ªç„¶è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œæä¾›æ™ºèƒ½é—®ç­”ã€æ–‡æ¡£å¤„ç†ã€æ•°æ®åˆ†æç­‰åŠå…¬åŠ©æ‰‹åŠŸèƒ½ã€‚

#### 3. **å®‰å…¨å¯é ï¼Œä¼ä¸šçº§ä¿éšœ**

æä¾›å®Œå–„çš„å®‰å…¨æœºåˆ¶å’Œæƒé™æ§åˆ¶ï¼Œç¡®ä¿ä¼ä¸šæ•°æ®å®‰å…¨ã€‚</textarea>
            <button class="test-button" onclick="testTitleRendering()">æµ‹è¯•æ ‡é¢˜æ¸²æŸ“</button>
            <div class="status info">è¾“å…¥åŒ…å«æ ‡é¢˜çš„Markdownå†…å®¹ï¼Œç‚¹å‡»æŒ‰é’®æµ‹è¯•æ¸²æŸ“æ•ˆæœ</div>
            <div id="titleOutput" class="output-area blog-article-content markdown-content">
                æ¸²æŸ“ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•2: å¤æ‚æ ‡é¢˜æ ¼å¼æµ‹è¯•</h2>
            <textarea id="complexInput" class="input-area">##### 1.1 **å­åŠŸèƒ½è¯¦ç»†ä»‹ç»**

è¿™æ˜¯å­åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜å†…å®¹ã€‚

###### 1.1.1 *é‡è¦æ³¨æ„äº‹é¡¹*

è¿™é‡Œæ˜¯ä¸€äº›é‡è¦çš„æ³¨æ„äº‹é¡¹ã€‚

##### 2. **é…ç½®å‚æ•°è¯´æ˜**

é…ç½®å‚æ•°çš„è¯¦ç»†è¯´æ˜å†…å®¹ã€‚</textarea>
            <button class="test-button" onclick="testComplexRendering()">æµ‹è¯•å¤æ‚æ ‡é¢˜æ¸²æŸ“</button>
            <div class="status info">è¾“å…¥å¤æ‚æ ‡é¢˜æ ¼å¼ï¼Œç‚¹å‡»æŒ‰é’®æµ‹è¯•æ¸²æŸ“æ•ˆæœ</div>
            <div id="complexOutput" class="output-area blog-article-content markdown-content">
                æ¸²æŸ“ç»“æœå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...
            </div>
        </div>
        
        <div class="test-section">
            <h2 class="test-title">æµ‹è¯•3: è‡ªåŠ¨åŒ–éªŒè¯ç»“æœ</h2>
            <button class="test-button" onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
            <div class="status info">ç‚¹å‡»æŒ‰é’®è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å¹¶æŸ¥çœ‹ç»“æœ</div>
            <table class="result-table" id="resultTable">
                <thead>
                    <tr>
                        <th>æµ‹è¯•é¡¹</th>
                        <th>é¢„æœŸç»“æœ</th>
                        <th>å®é™…ç»“æœ</th>
                        <th>çŠ¶æ€</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>åŸºç¡€æ ‡é¢˜æ¸²æŸ“</td>
                        <td>æ•°å­—å’Œæ–‡æœ¬åœ¨åŒä¸€è¡Œ</td>
                        <td>å¾…æµ‹è¯•</td>
                        <td>å¾…æµ‹è¯•</td>
                    </tr>
                    <tr>
                        <td>å¤æ‚æ ‡é¢˜æ¸²æŸ“</td>
                        <td>å¤šçº§æ ‡é¢˜æ­£ç¡®æ˜¾ç¤º</td>
                        <td>å¾…æµ‹è¯•</td>
                        <td>å¾…æµ‹è¯•</td>
                    </tr>
                    <tr>
                        <td>å†…è”å…ƒç´ ä¿æŒ</td>
                        <td>ç²—ä½“/æ–œä½“æ­£ç¡®æ˜¾ç¤º</td>
                        <td>å¾…æµ‹è¯•</td>
                        <td>å¾…æµ‹è¯•</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // é…ç½®marked
        if (typeof marked !== 'undefined') {
            marked.setOptions({
                breaks: false,          // ä¸å…è®¸å¼ºåˆ¶æ¢è¡Œï¼Œé¿å…æ ‡é¢˜è¢«åˆ†å‰²
                gfm: true,              // å¯ç”¨GitHubé£æ ¼Markdown
                headerIds: true,        // ä¸ºæ ‡é¢˜ç”ŸæˆID
                mangle: false,          // ä¸è½¬ä¹‰æ ‡é¢˜ä¸­çš„HTML
                sanitize: false,        // ä¸è¿‡æ»¤HTMLæ ‡ç­¾
                smartLists: true,       // æ™ºèƒ½åˆ—è¡¨å¤„ç†
                smartypants: false,     // ä¸è½¬æ¢å¼•å·
                silent: false,          // ä¸å¿½ç•¥è§£æé”™è¯¯
                pedantic: false,        // ä¸ä¸¥æ ¼éµå¾ªmarkdownè§„èŒƒ
                xhtml: false            // ä¸ä½¿ç”¨XHTML
            });
        }

        function testTitleRendering() {
            const input = document.getElementById('titleInput').value;
            const output = document.getElementById('titleOutput');
            
            try {
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(input.trim());
                    output.innerHTML = html;
                    output.className = 'output-area blog-article-content markdown-content';
                    showStatus('titleOutput', 'âœ… æ ‡é¢˜æ¸²æŸ“æˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ff6b6b;">é”™è¯¯: markedåº“æœªåŠ è½½</p>';
                    showStatus('titleOutput', 'âŒ markedåº“æœªåŠ è½½', 'error');
                }
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">æ¸²æŸ“é”™è¯¯: ${error.message}</p>`;
                showStatus('titleOutput', `âŒ æ¸²æŸ“é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function testComplexRendering() {
            const input = document.getElementById('complexInput').value;
            const output = document.getElementById('complexOutput');
            
            try {
                if (typeof marked !== 'undefined') {
                    const html = marked.parse(input.trim());
                    output.innerHTML = html;
                    output.className = 'output-area blog-article-content markdown-content';
                    showStatus('complexOutput', 'âœ… å¤æ‚æ ‡é¢˜æ¸²æŸ“æˆåŠŸ', 'success');
                } else {
                    output.innerHTML = '<p style="color: #ff6b6b;">é”™è¯¯: markedåº“æœªåŠ è½½</p>';
                    showStatus('complexOutput', 'âŒ markedåº“æœªåŠ è½½', 'error');
                }
            } catch (error) {
                output.innerHTML = `<p style="color: #ff6b6b;">æ¸²æŸ“é”™è¯¯: ${error.message}</p>`;
                showStatus('complexOutput', `âŒ æ¸²æŸ“é”™è¯¯: ${error.message}`, 'error');
            }
        }

        function runAllTests() {
            // æµ‹è¯•åŸºç¡€æ ‡é¢˜æ¸²æŸ“
            const basicInput = "#### 1. **å¤šç«¯è¦†ç›–ï¼Œçµæ´»æ¥å…¥**\n\nå†…å®¹...";
            const basicHtml = marked.parse(basicInput);
            const basicElement = document.createElement('div');
            basicElement.innerHTML = basicHtml;
            const basicH4 = basicElement.querySelector('h4');
            
            let basicPass = false;
            if (basicH4) {
                const firstChild = basicH4.firstChild;
                const secondChild = basicH4.childNodes[1];
                if (firstChild && secondChild && 
                    firstChild.nodeType === Node.TEXT_NODE && 
                    firstChild.textContent.trim() === '1.' &&
                    secondChild.nodeType === Node.ELEMENT_NODE) {
                    basicPass = true;
                }
            }
            
            // æµ‹è¯•å¤æ‚æ ‡é¢˜æ¸²æŸ“
            const complexInput = "##### 1.1.1 *é‡è¦æ³¨æ„äº‹é¡¹*";
            const complexHtml = marked.parse(complexInput);
            const complexElement = document.createElement('div');
            complexElement.innerHTML = complexHtml;
            const complexH5 = complexElement.querySelector('h5');
            const complexPass = !!complexH5;
            
            // æµ‹è¯•å†…è”å…ƒç´ ä¿æŒ
            let inlinePass = false;
            if (basicH4) {
                const strongElement = basicH4.querySelector('strong');
                if (strongElement && strongElement.textContent.includes('å¤šç«¯è¦†ç›–')) {
                    inlinePass = true;
                }
            }
            
            // æ›´æ–°è¡¨æ ¼
            const table = document.getElementById('resultTable');
            const rows = table.querySelectorAll('tbody tr');
            
            // æ›´æ–°åŸºç¡€æ ‡é¢˜æ¸²æŸ“æµ‹è¯•ç»“æœ
            rows[0].cells[2].textContent = basicPass ? 'æ•°å­—å’Œæ–‡æœ¬åœ¨åŒä¸€è¡Œ' : 'æ•°å­—å’Œæ–‡æœ¬åˆ†è¡Œæ˜¾ç¤º';
            rows[0].cells[3].innerHTML = basicPass ? '<span class="pass">âœ… é€šè¿‡</span>' : '<span class="fail">âŒ å¤±è´¥</span>';
            
            // æ›´æ–°å¤æ‚æ ‡é¢˜æ¸²æŸ“æµ‹è¯•ç»“æœ
            rows[1].cells[2].textContent = complexPass ? 'å¤šçº§æ ‡é¢˜æ­£ç¡®æ˜¾ç¤º' : 'å¤šçº§æ ‡é¢˜æ˜¾ç¤ºå¼‚å¸¸';
            rows[1].cells[3].innerHTML = complexPass ? '<span class="pass">âœ… é€šè¿‡</span>' : '<span class="fail">âŒ å¤±è´¥</span>';
            
            // æ›´æ–°å†…è”å…ƒç´ ä¿æŒæµ‹è¯•ç»“æœ
            rows[2].cells[2].textContent = inlinePass ? 'ç²—ä½“/æ–œä½“æ­£ç¡®æ˜¾ç¤º' : 'å†…è”å…ƒç´ æ˜¾ç¤ºå¼‚å¸¸';
            rows[2].cells[3].innerHTML = inlinePass ? '<span class="pass">âœ… é€šè¿‡</span>' : '<span class="fail">âŒ å¤±è´¥</span>';
            
            showStatus('resultTable', 'âœ… è‡ªåŠ¨åŒ–æµ‹è¯•å®Œæˆ', 'success');
        }

        function showStatus(elementId, message, type) {
            // ç§»é™¤ç°æœ‰çš„çŠ¶æ€æ¶ˆæ¯
            const existingStatus = document.querySelector(`#${elementId}`).previousElementSibling;
            if (existingStatus && existingStatus.className.includes('status')) {
                existingStatus.remove();
            }
            
            // åˆ›å»ºæ–°çš„çŠ¶æ€æ¶ˆæ¯
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.textContent = message;
            
            // æ’å…¥åˆ°è¾“å‡ºåŒºåŸŸå‰
            const outputElement = document.getElementById(elementId);
            outputElement.parentNode.insertBefore(status, outputElement);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª åšå®¢è¯¦æƒ…é¡µæ ‡é¢˜ä¿®å¤æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('ğŸ“‹ æµ‹è¯•å†…å®¹ï¼š');
            console.log('1. æ ‡é¢˜æ¸²æŸ“ä¿®å¤ï¼ˆæ•°å­—å’Œæ–‡æœ¬åœ¨åŒä¸€è¡Œï¼‰');
            console.log('2. å¤æ‚æ ‡é¢˜æ ¼å¼å¤„ç†');
            console.log('3. è‡ªåŠ¨åŒ–éªŒè¯æµ‹è¯•');
        });
    </script>
</body>
</html>